# 智能视频总结系统

## 项目简介

智能视频总结系统是一个基于前后端分离架构的Web应用，支持用户上传视频文件，通过AI技术自动进行语音转写和智能总结。系统采用异步任务处理机制，提供实时进度反馈，支持任务取消和结果导出功能。

## 技术栈

### 后端技术
- **Web框架**: FastAPI (Python 3.x)
- **数据库**: MySQL + SQLAlchemy ORM
- **认证授权**: JWT (JSON Web Token) + python-jose
- **密码加密**: passlib + bcrypt
- **异步任务**: Python threading
- **文件存储**: 阿里云OSS (oss2)
- **视频转码**: ffmpeg-python
- **邮件服务**: SMTP (支持SSL/STARTTLS)
- **API文档**: FastAPI自动生成Swagger/ReDoc

### 前端技术
- **框架**: Vue 3 (Composition API)
- **构建工具**: Vite
- **UI组件库**: Element Plus
- **路由管理**: Vue Router 4
- **状态管理**: Pinia
- **HTTP请求**: Axios
- **样式**: CSS3 (渐变背景、动画效果)

### 第三方服务
- **语音识别**: 阿里云智能语音识别服务
- **AI总结**: 通义千问大模型 (DashScope API)
- **对象存储**: 阿里云OSS

## 实现功能

### 1. 用户认证模块
- **用户注册**: 邮箱验证码注册，密码强度验证（至少6位，包含字母和数字）
- **用户登录**: JWT Token认证，支持Token自动刷新
- **找回密码**: 通过邮箱验证码重置密码
- **安全机制**: 密码SHA1加密存储，JWT Token过期管理

### 2. 用户管理模块
- **个人资料**: 用户信息管理（用户名、邮箱、头像、性别、生日）
- **头像上传**: 支持图片上传至OSS，自动生成访问URL
- **会员系统**: 支持普通用户和VIP用户两种会员类型
- **资料更新**: 实时更新用户资料，支持头像更换

### 3. 视频总结核心功能
- **文件上传**: 支持拖拽上传，限制视频格式（mp4、mov、avi、mkv、webm）
- **视频转码**: 自动将视频文件转换为mp3音频格式
- **文件存储**: 转码后的音频文件自动上传至阿里云OSS
- **语音转写**: 调用阿里云智能语音识别API，将音频转换为文字
- **AI总结**: 基于通义千问大模型，对转写文本进行智能总结
- **异步处理**: 采用多线程异步处理，不阻塞用户操作
- **进度追踪**: 实时查询任务进度（排队中、转写中、总结中、已完成）
- **任务管理**: 支持任务取消、状态查询、错误处理

### 4. 前端交互功能
- **实时进度**: 轮询机制实时更新任务进度和阶段
- **结果展示**: 分别展示转写文本和总结文本
- **结果导出**: 支持将总结结果导出为Markdown文件
- **结果复制**: 一键复制总结文本到剪贴板
- **页面缓存**: 使用Vue keep-alive保持页面状态，切换页面不丢失数据
- **响应式设计**: 适配不同屏幕尺寸，现代化UI设计

### 5. 系统架构设计
- **RESTful API**: 标准化API设计，统一错误处理
- **CORS支持**: 配置跨域资源共享，支持前后端分离部署
- **依赖注入**: FastAPI依赖注入系统，代码解耦
- **数据库迁移**: 支持数据库表结构自动创建和迁移
- **环境配置**: 使用.env文件管理环境变量，配置灵活

## 技术亮点

1. **异步任务处理**: 采用Python多线程实现异步任务处理，提升用户体验，避免长时间等待
2. **文件处理流程**: 视频→音频转码→OSS存储→语音识别→AI总结，完整的文件处理链路
3. **实时进度反馈**: 前端轮询机制实时获取任务状态，提供流畅的用户体验
4. **JWT认证机制**: 无状态认证，支持分布式部署，安全性高
5. **模块化设计**: 前后端分离，服务层、API层、模型层清晰分离，易于维护和扩展
6. **错误处理机制**: 完善的异常捕获和错误提示，提升系统稳定性
7. **任务取消功能**: 支持任务取消，避免资源浪费

## 项目结构

```
video-sum/
├── backend/                 # 后端服务
│   ├── app/
│   │   ├── api/          # API路由层
│   │   ├── core/         # 核心配置（数据库、配置）
│   │   ├── models/       # 数据模型
│   │   ├── services/     # 业务服务层
│   │   └── main.py       # 应用入口
│   └── init_db.py        # 数据库初始化
└── frontend/             # 前端应用
    ├── src/
    │   ├── views/        # 页面组件
    │   ├── router/      # 路由配置
    │   └── main.js      # 应用入口
    └── package.json     # 依赖配置
```

## 核心API接口

- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/send-code` - 发送验证码
- `POST /api/auth/reset-password` - 重置密码
- `GET /api/user/profile` - 获取用户资料
- `PUT /api/user/profile` - 更新用户资料
- `POST /api/user/avatar` - 上传头像
- `POST /api/summary/start` - 提交视频总结任务
- `GET /api/summary/status` - 查询任务状态
- `POST /api/summary/cancel` - 取消任务

